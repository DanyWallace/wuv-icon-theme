sudo: required
services:
- docker
addons:
  apt:
    packages:
    - realpath
install:
- docker pull ubuntu:bionic
- wget https://raw.githubusercontent.com/Nitrux/nitrux-repository-util/master/nomad-repository-util.sh
  -O nomad-repository-util.sh
- chmod +x nomad-repository-util.sh
script:
- docker run --rm -v $(pwd)/:/build/ -w /build/ ubuntu:bionic /bin/bash travis-build.sh
branches:
  only:
  - master
  - development
deploy:
- provider: script
  script: "./source/nomad-repository-util.sh upload testing *.deb"
  skip_cleanup: true
  on:
    branch: master
- provider: script
  script: "./source/nomad-repository-util.sh upload development *.deb"
  skip_cleanup: true
  on:
    branch: development
notifications:
  email: false
  slack:
    secure: Z0saVO7yIy8sdthzbUe3qyvYYI63y1EiPfPv8EB029fXt433tDKtttkRJs0RYHnFAnq498L6L3928vXoSjeI8PXWi74tFl9g04o4r1VjCv1rSoXc3cH3bvsUkfBL5wbJV8vdLtBEafysJwzicjcM0RiBBq6rjyvXZXHgBH/sPgU=
